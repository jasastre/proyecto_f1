---
import Layout from "../layouts/Layout.astro";
import LandingHeader from "../components/LandingHeader.astro";
import { SignIn, SignOut } from "auth-astro/components";
import { getSession } from "auth-astro/server";

const session = await getSession(Astro.request);
console.log(session);
---

<Layout title="F1® España">
	<LandingHeader />
	<div
		class="relative flex items-center justify-center min-h-screen bg-gray-900 overflow-hidden"
	>
		<div
			class="absolute inset-0 bg-[url('/parrilla_salida.webp')] bg-cover bg-center before:absolute before:inset-0 before:bg-black/30"
		>
		</div>
		<main class="relative w-full h-screen overflow-auto">
			<section class="mt-40">
				<div class="flex items-center justify-center">
					<div
						class="flex max-w-lg flex-col items-center justify-center px-10 py-8 text-white bg-gray-800 rounded-lg shadow-lg"
					>
						<h2 class="text-2xl font-bold mb-4">
							¡Disfruta la Formula 1 en vivo!
						</h2>
						<p class="text-center mb-6">
							Aquí puedes vivir cada fin de semana la emoción del
							Gran Prix. Sigue los tiempos de las sesiones en vivo
							y lleva tu pasión a otro nivel. Solo necesitas
							registrarte.
						</p>
						<div class="snap-center text-white">
							{
								session?(
									<div>
										<span>!Hola, {session.user?.name}!</span>
										<p class="my-3">Ya solo accede <a class="underline" href="/live">aquí</a> para disfrutar de las sesiones en directo.</p>
										<SignOut><p class="bg-red-formula1 hover:scale-105 text-white	 font-bold py-2 px-4 rounded transition duration-300">Cerrar sesión</p></SignOut>
									</div>
								):(
								<SignIn provider="google">
									<a
										href="#"
										class="flex items-center justify-center bg-slate-300 hover:scale-105 text-gray-800	 font-bold py-2 px-4 rounded transition duration-300"
									>
										<svg
											class="w-5 h-5 mr-2"
											xmlns="http://www.w3.org/2000/svg"
											viewBox="0 0 48 48"
										>
											<path
												fill="#4285F4"
												d="M24 9.5c3.06 0 5.78 1.17 7.9 3.07l5.9-5.9C34.7 3.16 29.68.5 24 .5 14.52.5 6.88 5.94 3.42 13.86l6.98 5.51C12.18 13.04 17.67 9.5 24 9.5z"
											></path>
											<path
												fill="#34A853"
												d="M46.49 24.64c0-1.7-.15-3.34-.42-4.91H24v9.27h12.71c-.55 2.93-2.13 5.43-4.51 7.1v5.92h7.29c4.26-3.92 6.7-9.7 6.7-17.38z"
											></path>
											<path
												fill="#FBBC05"
												d="M10.4 29.31l-6.98-5.51C2.33 27.36 2 30.6 2 33.99c0 3.39.33 6.63 1.42 9.64l6.98-5.51c-1.3-1.63-2.17-3.66-2.17-5.8z"
											></path>
											<path
												fill="#EA4335"
												d="M24 47.5c5.68 0 10.72-1.92 14.29-5.22l-7.29-5.92c-2.01 1.35-4.55 2.15-7 2.15-6.33 0-11.82-3.54-14.45-8.68l-6.98 5.51C6.88 42.06 14.52 47.5 24 47.5z"
											></path>
											<path fill="none" d="M0 0h48v48H0z"
											></path>
										</svg>
										Iniciar sesión con Google
									</a>
								</SignIn>
								)

							}
						</div>
					</div>
				</div>
			</section>
		</main>
	</div>
</Layout>
